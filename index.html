<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>AnyCSS Automation</title>
    <script src="https://cdn.jsdelivr.net/npm/nguraijs@0.2.0/dist/index.iife.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tenoxui/moxie@0.4.2/dist/index.iife.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@anyframe/css@0.2.0/dist/anycss.iife.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@nousantx/anyframe-dom@0.1.0/dist/index.iife.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap"
      rel="stylesheet"
    />
    <script>
      const { Tokenizer } = TokenizerCore
    </script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --default-font-mono: 'JetBrains Mono';
      }

      .token.comment {
        color: gray;
        font-style: italic;
      }

      .token.keyword,
      .token.tag {
        color: #f43333;
      }

      .token.punctuation {
        color: #c2c2c2;
      }

      .token.boolean {
        color: #f6f66d;
      }

      .token.string {
        color: #61f161;
      }

      .token.global {
        color: #6baced;
      }
    </style>
  </head>
  <body class="p-4">
    <div class="bg-gray-950 p-1 pt-0 radius-lg">
      <div class="flex gap-1.5 pl-2 items-center [&_>_div]:size-12px">
        <div class="radius-full bg-gray-800"></div>
        <div class="radius-full bg-gray-800"></div>
        <div class="radius-full bg-gray-800"></div>

        <span
          class="ml-1 text-xs text-neutral-50 font-mono lh-1 p-2 block border-gray-700 border border-b-0 bg-gray-900 mt-4px text-gray-200 radius-(t:md) move-0/1px"
          >anyframe.js</span
        >
      </div>
      <div class="overflow-x-scroll bg-gray-900 text-neutral-50 radius-md border-1 border-gray-700">
        <pre class="language-javascript min-w-fit p-5 text-sm">
import { AnyCSS } from '@anyframe/css'
import { wind } from '@anyframe/preset-tailwindcss'
 
const css = new AnyCSS({/* configuration here */})
 
console.log(css.render("bg-red-500"))
</pre
        >
      </div>
    </div>

    <script src="./index.js"></script>
    <script>
      const elem = document.querySelectorAll('[class*="language-"]')

      const languageMap = {
        'language-css': presets.css,
        'language-javascript': presets.javascript,
        'language-html': presets.html
      }

      function processTokens(tokens) {
        return tokens
          .map(
            line =>
              '<span>' +
              line
                .map(
                  token =>
                    `<span class="token ${token.type}">${token.value
                      .replace(/&/g, '&amp;')
                      .replace(/</g, '&lt;')
                      .replace(/>/g, '&gt;')
                      .replace(/"/g, '&quot;')
                      .replace(/'/g, '&#039;')
                      .replace(/ /g, '&nbsp;')}</span>`
                )
                .join('') +
              '</span>'
          )
          .join('\n') // Wrap lines properly
      }

      elem.forEach(e => {
        const langClass = Object.keys(languageMap).find(cls => e.classList.contains(cls))
        const langPreset = languageMap[langClass] || presets.javascript // Default to JavaScript

        const tokens = new Tokenizer(langPreset).tokenize(
          e.getAttribute('data-code') || e.textContent
        )
        e.innerHTML = processTokens(tokens)
        console.log(e.innerHTML)
      })

      AnyDom.init({
        config: {
          preflight: true,
          colorVariant: 'rgb',
          alias: {
            'font-mono': 'font-(family:{default-font-mono})'
          }
        }
      })
    </script>
  </body>
</html>
